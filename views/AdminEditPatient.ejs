<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Patient</title>
  <style>
    @font-face {
      font-family: 'Matter-Regular';
      src: url('fonts/Matter-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    body {
      font-family: 'Matter-Regular', Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      background-color: #f8f9fa;
    }

    .dashboard {
      display: flex;
      width: 100%;
    }

    .sidebar {
      width: 250px;
      background-color: #F7FAFF;
      padding: 20px;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }

    .sidebar-logo {
      text-align: center;
      margin-bottom: 20px;
    }

    .sidebar-logo img {
      width: 170px;
      height: auto;
    }

    .sidebar-menu {
      list-style: none;
      padding: 0;
    }

    .sidebar-menu-item {
      margin: 10px 0;
    }

    .sidebar-menu-item a {
      text-decoration: none;
      color: #A0AAC8;
      display: block;
      padding: 10px;
      border-radius: 5px;
      transition: color 0.3s ease;
    }

    .sidebar-menu-item a.active,
    .sidebar-menu-item a:hover {
      color: #42427D;
      background-color: transparent;
    }

    .sidebar h2 {
      margin: 0 0 20px 0;
      color: #42427D;
    }

    .main-content {
      flex: 1;
      padding: 20px;
    }

    .container {
      width: 100%;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #e9ecef;
      border-radius: 5px;
      background-color: #fff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    h1 {
      margin-bottom: 20px;
      text-align: center;
      color: #42427D;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      font-weight: bold;
      color: #42427D;
    }

    .form-group input {
      width: 100%;
      padding: 8px;
      border: 1px solid #e9ecef;
      border-radius: 4px;
    }

    button {
      background-color: transparent;
      color: #FF7F50;
      border: 2px solid #FF7F50;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    button:hover {
      background-color: #FF7F50;
      color: white;
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="sidebar">
      <div class="sidebar-logo">
        <img src="/logo.png" alt="Admin Logo">
      </div>
      <h2>Admin Functions</h2>
      <ul class="sidebar-menu">
        <li class="sidebar-menu-item"><a href="/admin/blogs" <% if (activePage === 'blogs') { %> class="active" <% } %>>View Admin Blogs</a></li>
        <li class="sidebar-menu-item"><a href="/admin/blog" <% if (activePage === 'blog-upload') { %> class="active" <% } %>>Upload Admin Blog</a></li>
        <!-- <li class="sidebar-menu-item"><a href="/admin/admin-home" <% if (activePage === 'admin-home') { %> class="active" <% } %>>Home</a></li> -->
        <li class="sidebar-menu-item"><a href="/admin/doctor-profile-requests" <% if (activePage === 'doctor-profile-requests') { %> class="active" <% } %>>Doctor Profile Verification Requests</a></li>
        <li class="sidebar-menu-item"><a href="/admin/subscriptions" <% if (activePage === 'subscriptions') { %> class="active" <% } %>>Doctor Subscription Verification Requests</a></li>
        <li class="sidebar-menu-item"><a href="/admin/insurances" <% if (activePage === 'insurances') { %> class="active" <% } %>>Manage Insurance Providers</a></li>
        <!-- <li class="sidebar-menu-item"><a href="/admin/blogs-all" <% if (activePage === 'blogs-all') { %> class="active" <% } %>>Search Blogs</a></li> -->
        <li class="sidebar-menu-item"><a href="/admin/view-doctors" <% if (activePage === 'view-doctors') { %> class="active" <% } %>>View Doctors</a></li>
        <li class="sidebar-menu-item"><a href="/admin/view-patients" <% if (activePage === 'view-patients') { %> class="active" <% } %>>View Patients</a></li>
        <li class="sidebar-menu-item"><a href="/auth/logout" <% if (activePage === 'logout') { %> class="active" <% } %>>Logout</a></li>
      </ul>
    </div>

    <div class="main-content">
      <div class="container">
        <h1>Edit Patient</h1>
        <form action="/admin/update-patient/<%= patient._id %>" method="POST">
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" value="<%= patient.name %>" required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" value="<%= patient.email %>" required>
          </div>
          <div class="form-group">
            <label for="phoneNumber">Phone Number</label>
            <input type="text" id="phoneNumber" name="phoneNumber" value="<%= patient.phoneNumber %>" required>
          </div>
          <div class="form-group">
            <label for="dateOfBirth">Date of Birth</label>
            <input type="date" id="dateOfBirth" name="dateOfBirth" value="<%= patient.dateOfBirth.toISOString().split('T')[0] %>" required>
          </div>
          <div class="form-group">
            <label for="address">Address</label>
            <input type="text" id="address" name="address" value="<%= patient.address %>" required>
          </div>
          <div class="form-group">
            <label for="insuranceProvider">Insurance Provider</label>
            <input type="text" id="insuranceProvider" name="insuranceProvider" value="<%= patient.insuranceProvider %>">
          </div>
          <div class="form-group">
            <label for="policyNumber">Policy Number</label>
            <input type="text" id="policyNumber" name="policyNumber" value="<%= patient.policyNumber %>">
          </div>
          <div class="form-group">
            <label for="emergencyContacts">Emergency Contacts (JSON)</label>
            <textarea id="emergencyContacts" name="emergencyContacts" rows="4" required><%= JSON.stringify(patient.emergencyContacts, null, 2) %></textarea>
          </div>

          <div class="form-group">
            <label for="profilePicture">Profile Picture</label>
            <input type="file" id="profilePicture" name="profilePicture">
            <% if (patient.profilePicture) { %>
              <div>
                <img src="data:<%= patient.profilePicture.contentType %>;base64,<%= patient.profilePicture.data.toString('base64') %>" alt="Profile Picture" style="max-width: 200px; margin-top: 10px;">
              </div>
            <% } %>
          </div>
          <button type="submit">Update Patient</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
